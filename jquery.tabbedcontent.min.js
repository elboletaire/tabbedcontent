/* Tabs plugin for jQuery created by Òscar Casajuana < elboletaire at underave dot net >
 * Copyright 2013 Òscar Casajuana (Apache License v.2.0) */
(function(e,t,n,r){"use strict";var i=function(i,s){function h(e){return a.filter(e).length?true:false}function p(){return c===0}function d(){return c===a.length-1}function v(e){if(e.toString().match(/^[0-9]$/)){return"#"+a.eq(e).attr("id")}return"#"+e}function m(){return s.links.index(e("."+s.currentClass))}function g(){return v(m()).replace("#","")}function y(e){var t=c+1;if(e===r)e=s.loop;if(t<a.length){return E(t,true)}else if(e&&t>=a.length){return E(0,true)}return false}function b(e){var t=c-1;if(e===r)e=s.loop;if(t>=0){return E(t,true)}else if(e&&t<0){return E(a.length-1,true)}return false}function w(e){if(u&&f!==r&&"pushState"in f){u=false;n.setTimeout(function(){f.replaceState(null,"",e)},100)}c=m();if(s.onSwitch&&typeof s.onSwitch==="function"){s.onSwitch(e,N())}}function E(e,t){if(!e.toString().match(/^#/)){e=v(e)}if(!h(e)){return false}s.links.removeClass(s.currentClass);s.links.filter("a[href="+e+"]").addClass(s.currentClass);a.hide();if(t){if(f!==r&&"pushState"in f){f.pushState(null,"",e)}else{n.location.hash=e}}a.filter(e).show(s.speed,function(){if(s.speed){w(e)}});if(!s.speed){w(e)}return true}function S(e){return E(e,true)}function x(e){E(l.hash)}function T(){if(h(l.hash)){E(l.hash)}else if(s.errorSelector&&a.find(s.errorSelector).length){a.each(function(){if(e(this).find(s.errorSelector).length){E("#"+e(this).attr("id"));return false}})}else{E("#"+i.children(":first-child").attr("id"))}if("onhashchange"in n){e(n).bind("hashchange",x)}else{var t=l.href;n.setInterval(function(){if(t!==l.href){x.call(n.event);t=l.href}},100)}if(s.onInit&&typeof s.onInit==="function"){s.onInit(N())}}function N(){return{"switch":S,switchTab:S,getCurrent:m,getCurrentId:g,next:y,prev:b,isFirst:p,isLast:d}}var o={links:i.prev().find("a").length?i.prev().find("a"):".tabs a",errorSelector:".error-message",speed:false,onSwitch:false,onInit:false,currentClass:"current",loop:false},u=true,a=i.children(),f=n.history,l=t.location,c=null;s=e.extend(o,s);if(!(s.links instanceof e)){s.links=e(s.links)}T();return N()};e.fn.tabbedContent=function(t){return this.each(function(){var n=new i(e(this),t);e(this).data("api",n)})}})(jQuery,document,window)
